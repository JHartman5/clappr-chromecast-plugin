!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@clappr/player")):"function"==typeof define&&define.amd?define(["@clappr/player"],e):"object"==typeof exports?exports.ChromecastPlugin=e(require("@clappr/player")):t.ChromecastPlugin=e(t.Clappr)}(window,(function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(e,i){e.exports=t},function(t,e){t.exports='<div class="chromecast-playback-background"></div>\n<div class="chromecast-playback-overlay"></div>\n'},function(t,e,i){(e=i(9)(!1)).push([t.i,".chromecast-playback{height:100%;width:100%}.chromecast-playback .chromecast-playback-background,.chromecast-playback .chromecast-playback-overlay{position:absolute;height:100%;width:100%}.chromecast-playback .chromecast-playback-background{background-size:contain}.chromecast-playback .chromecast-playback-overlay{background-color:#000;opacity:0.4}.chromecast-button{background:transparent;border:0;width:32px;height:32px;font-size:22px;line-height:32px;letter-spacing:0;margin:0 6px;color:#fff;opacity:0.5;vertical-align:middle;text-align:left;cursor:pointer;-webkit-font-smoothing:antialiased;transition:all 0.1s ease}.chromecast-button:hover{opacity:0.75;text-shadow:rgba(255,255,255,0.8) 0 0 5px}.chromecast-button:focus{outline:none}.chromecast-button svg{width:24px;height:24px}.chromecast-button svg #cast,.chromecast-button svg #cast-on,.chromecast-button svg #Path{fill:#fff;stroke:#fff;stroke-width:0.5px}\n",""]),t.exports=e},function(t,e){var i=/^(?:0|[1-9]\d*)$/;function s(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var a,r,n=Object.prototype,o=n.hasOwnProperty,c=n.toString,h=n.propertyIsEnumerable,l=(a=Object.keys,r=Object,function(t){return a(r(t))}),d=Math.max,p=!h.call({valueOf:1},"valueOf");function u(t,e){var i=b(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&y(t)}(t)&&o.call(t,"callee")&&(!h.call(t,"callee")||"[object Arguments]"==c.call(t))}(t)?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],s=i.length,a=!!s;for(var r in t)!e&&!o.call(t,r)||a&&("length"==r||m(r,s))||i.push(r);return i}function g(t,e,i){var s=t[e];o.call(t,e)&&f(s,i)&&(void 0!==i||e in t)||(t[e]=i)}function m(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}function v(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}function f(t,e){return t===e||t!=t&&e!=e}var b=Array.isArray;function y(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=C(t)?c.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}function C(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var k,T=(k=function(t,e){if(p||v(e)||y(e))!function(t,e,i,s){i||(i={});for(var a=-1,r=e.length;++a<r;){var n=e[a],o=s?s(i[n],t[n],n,i,t):void 0;g(i,n,void 0===o?t[n]:o)}}(e,function(t){return y(t)?u(t):function(t){if(!v(t))return l(t);var e=[];for(var i in Object(t))o.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}(e),t);else for(var i in e)o.call(e,i)&&g(t,i,e[i])},function(t,e){return e=d(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,r=d(i.length-e,0),n=Array(r);++a<r;)n[a]=i[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=i[a];return o[e]=n,s(t,this,o)}}((function(t,e){var i=-1,s=e.length,a=s>1?e[s-1]:void 0,r=s>2?e[2]:void 0;for(a=k.length>3&&"function"==typeof a?(s--,a):void 0,r&&function(t,e,i){if(!C(i))return!1;var s=typeof e;return!!("number"==s?y(i)&&m(e,i.length):"string"==s&&e in i)&&f(i[e],t)}(e[0],e[1],r)&&(a=s<3?void 0:a,s=1),t=Object(t);++i<s;){var n=e[i];n&&k(t,n,i,a)}return t})));t.exports=T},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><g id="Page-1" fill="none" fill-rule="evenodd"><g id="ic_cast_black_24dp"><g id="ic_remove_circle_white_24dp"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast" fill="#000"></path><path id="bounds" d="M0 0h24v24H0z"></path></g></g></g></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><g id="Page-1" fill="none" fill-rule="evenodd"><g id="ic_cast0_black_24dp"><g id="ic_remove_circle_white_24dp"><path d="M1 18v3h3c0-1.66-1.34-3-3-3z" id="Path" fill="#000"></path><path d="M1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z" id="Path" opacity=".3" fill="#000"></path><path d="M1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="Path" opacity=".3" fill="#000"></path><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="Path" fill="#000"></path><path id="bounds" d="M0 0h24v24H0z"></path></g></g></g></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><g id="Page-1" fill="none" fill-rule="evenodd"><g id="ic_cast1_black_24dp"><g id="ic_remove_circle_white_24dp"><path d="M1 18v3h3c0-1.66-1.34-3-3-3z" id="Path" opacity=".3" fill="#000"></path><path d="M1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z" id="Path" fill="#000"></path><path d="M1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="Path" opacity=".3" fill="#000"></path><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast" fill="#000"></path><path id="bounds" d="M0 0h24v24H0z"></path></g></g></g></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><g id="Page-1" fill="none" fill-rule="evenodd"><g id="ic_cast2_black_24dp"><g id="ic_remove_circle_white_24dp"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zM1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z" id="Path" opacity=".3" fill="#000"></path><path d="M1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="Path" fill="#000"></path><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast" fill="#000"></path><path id="bounds" d="M0 0h24v24H0z"></path></g></g></g></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><g id="Page-1" fill="none" fill-rule="evenodd"><g id="ic_cast_connected_black_24dp"><g id="ic_remove_circle_white_24dp"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast-on" fill="#000"></path><path id="bounds" d="M0 0h24v24H0z"></path></g></g></g></svg>'},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var a=(n=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),r=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[i].concat(r).concat([a]).join("\n")}var n,o,c;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,s){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(s)for(var r=0;r<this.length;r++){var n=this[r][0];null!=n&&(a[n]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);s&&a[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),e.push(c))}},e}},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return M}));var s=i(0),a=i(1),r=i.n(a);class n extends s.Playback{get name(){return"chromecast_playback"}get template(){return Object(s.template)(r.a)}get attributes(){return{class:"chromecast-playback"}}get isReady(){return!0}constructor(t){super(t),this.src=t.src,this.currentMedia=t.currentMedia,this.mediaControl=t.mediaControl,this.currentMedia.addUpdateListener(()=>this.onMediaStatusUpdate()),this.settings=t.settings;let e=t=>"volume"!=t;this.settings.default&&(this.settings.default=this.settings.default.filter(e)),this.settings.left&&(this.settings.left=this.settings.left.filter(e)),this.settings.right&&(this.settings.right=this.settings.right.filter(e)),this._closedCaptionsTracks=t.ccTracks||[],this._ccTrackId=-1,this._updateCCTrackID=t.updateCCTrackID}get closedCaptionsTracks(){return this._closedCaptionsTracks}get closedCaptionsTrackId(){return this._ccTrackId}set closedCaptionsTrackId(t){this._ccTrackId=t,this._updateCCTrackID(t)}render(){let t=this.template();this.$el.html(t),this.options.poster?this.$(".chromecast-playback-background").css("background-image","url("+this.options.poster+")"):this.$(".chromecast-playback-background").css("background-color","#666")}play(){this.currentMedia.play()}pause(){this.stopTimer(),this.currentMedia.pause(),this.getPlaybackType()===s.Playback.LIVE&&this.trigger(s.Events.PLAYBACK_DVR,!0)}stop(){this.stopTimer(),this.currentMedia.pause()}seek(t){this.stopTimer();let e=new chrome.cast.media.SeekRequest;e.currentTime=t,this.currentMedia.seek(e,()=>this.startTimer(),()=>s.Log.warn("seek failed")),this.getPlaybackType()===s.Playback.LIVE&&this.trigger(s.Events.PLAYBACK_DVR,t<this.getDuration()-30)}seekPercentage(t){if(t>=0&&t<=100){let e=this.getDuration();this.seek(t*e/100)}}startTimer(){this.timer=setInterval(()=>this.updateMediaControl(),100)}stopTimer(){clearInterval(this.timer),this.timer=null}getDuration(){return this.currentMedia.media.duration}isPlaying(){return"PLAYING"===this.currentMedia.playerState||"BUFFERING"===this.currentMedia.playerState}getPlaybackType(){return this.currentMedia.liveSeekableRange?s.Playback.LIVE:s.Playback.VOD}onMediaStatusUpdate(){this.mediaControl.changeTogglePlay(),this.isPlaying()&&!this.timer&&this.startTimer(),"BUFFERING"===this.currentMedia.playerState?(this.isBuffering=!0,this.trigger(s.Events.PLAYBACK_BUFFERING,this.name)):"PLAYING"===this.currentMedia.playerState?(this.isBuffering&&(this.isBuffering=!1,this.trigger(s.Events.PLAYBACK_BUFFERFULL,this.name)),this.prevState!==this.currentMedia.playerState&&this.trigger(s.Events.PLAYBACK_PLAY,this.name)):"IDLE"===this.currentMedia.playerState?(this.isBuffering&&(this.isBuffering=!1,this.trigger(s.Events.PLAYBACK_BUFFERFULL,this.name)),this.trigger(s.Events.PLAYBACK_ENDED,this.name)):"PAUSED"===this.currentMedia.playerState&&this.prevState!==this.currentMedia.playerState&&this.trigger(s.Events.PLAYBACK_PAUSE,this.name),this.prevState=this.currentMedia.playerState}updateMediaControl(){let t=this.currentMedia.getEstimatedTime(),e=this.currentMedia.media.duration;this.trigger(s.Events.PLAYBACK_TIMEUPDATE,{current:t,total:e},this.name)}show(){this.$el.show()}hide(){this.$el.hide()}}var o=i(2),c=i.n(o),h=i(3),l=i.n(h),d=i(4),p=i.n(d),u=i(5),g=i.n(u),m=i(6),v=i.n(m),f=i(7),b=i.n(f),y=i(8),C=i.n(y);const k=0,T=1,w={mp4:"video/mp4",ogg:"video/ogg","3gpp":"video/3gpp",webm:"video/webm",mkv:"video/x-matroska",m3u8:"application/x-mpegurl",mpd:"application/dash+xml"};w.ogv=w.ogg,w["3gp"]=w["3gpp"];class M extends s.UICorePlugin{get supportedVersion(){return{min:"0.4.0",max:"0.5.0"}}static get Movie(){return"movie"}static get TvShow(){return"tv_show"}static get Generic(){return"none"}static get version(){return VERSION}get version(){return VERSION}get name(){return"chromecast"}get tagName(){return"button"}get attributes(){return{class:"chromecast-button",type:"button"}}get events(){return{click:"click"}}get options(){return this.core.options.chromecast||(this.core.options.chromecast={})}get container(){return this.core.getCurrentContainer?this.core.getCurrentContainer():this.core.activeContainer}get playback(){return this.core.getCurrentPlayback?this.core.getCurrentPlayback():this.core.activePlayback}constructor(t){super(t),this.bootTryDelay=this.options.bootTryDelay||500,this.bootMaxTryCount=this.options.bootMaxTryCount||6,this.bootTryCount=0,this.textTracks=[],this.messageNamespace=this.options.customNamespace||"clappr-chromecast-plugin",this.isBootable()?(this.appId=this.options.appId||"9DFB77C0",this.deviceState=k,this.embedScript()):this.disable()}bindEvents(){this.listenTo(this.core.mediaControl,s.Events.MEDIACONTROL_RENDERED,this.render),s.Events.CORE_ACTIVE_CONTAINER_CHANGED?this.listenTo(this.core,s.Events.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged):this.listenTo(this.core.mediaControl,s.Events.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.container&&(this.listenTo(this.container,s.Events.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,s.Events.CONTAINER_PLAY,this.containerPlay),this.listenTo(this.container,s.Events.CONTAINER_ENDED,this.sessionStopped))}isBootable(){return!!s.Browser.isChrome&&(s.Browser.version<=71||(this.isSecure()||this.isLocalhost()))}isLocalhost(){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname}isSecure(){return"https:"===window.location.protocol}enable(){super.enable(),this.render(),this.embedScript()}embedScript(){if(window.chrome&&window.chrome.cast&&window.chrome.cast.isAvailable)this.bootstrapCastApi();else{let t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),t.onload=()=>this.bootstrapCastApi(),document.body.appendChild(t)}}bootstrapCastApi(){if(this.bootTryCount++,this.bootTryCount>this.bootMaxTryCount)return this.bootTryCount=0,s.Log.warn("GCastApi bootstrap timeout"),void this.disable();window.chrome?(this.bootTryCount=0,window.chrome.cast&&window.chrome.cast.isAvailable?(this.appId=this.appId||"9DFB77C0",this.initializeCastApi()):window.__onGCastApiAvailable=(t,e)=>{t?(this.appId=this.appId||"9DFB77C0",this.initializeCastApi()):(s.Log.warn("GCastApi error",e),this.disable())}):setTimeout(()=>{this.bootstrapCastApi()},this.bootTryDelay)}updateCCTrackID(t){if(-1!==t&&0===this.textTracks.filter(e=>e.id===t).length)return void console.warn(`Failed to enable text track with ID ${t}, as it does not exist.`);var e=[];-1!==t&&(e=[t]),this.session&&this.session.sendMessage(`urn:x-cast:${this.messageNamespace}:active-text-tracks`,e);let i=this.core.getCurrentContainer();i&&i.trigger(s.Events.CONTAINER_SUBTITLE_CHANGED,{id:t})}initializeCastApi(){let t=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,e=new chrome.cast.SessionRequest(this.appId),i=new chrome.cast.ApiConfig(e,t=>this.sessionListener(t),t=>this.receiverListener(t),t);chrome.cast.initialize(i,()=>s.Log.debug(this.name,"init success"),()=>s.Log.warn(this.name,"init error"))}sessionListener(t){s.Log.debug(this.name,"new session id:"+t.sessionId),this.newSession(t)}sessionUpdateListener(){this.session&&(s.Log.debug(this.name,this.session.status),this.session.status===chrome.cast.SessionStatus.STOPPED&&(this.sessionStopped(),this.session=null))}onSessionTextTracks(t){this.textTracks=t.map(t=>({id:t.trackId,name:t.name,track:t})),this.textTracks.length>0&&(this.playbackProxy&&(this.playbackProxy._closedCaptionsTracks=this.textTracks),this.trigger(s.Events.PLAYBACK_SUBTITLE_AVAILABLE),this.updateCCTrackID(this.core.getCurrentContainer().closedCaptionsTrackId))}receiverListener(t){t===chrome.cast.ReceiverAvailability.AVAILABLE?(s.Log.debug(this.name,"receiver found"),this.show()):(s.Log.debug(this.name,"receiver list empty"),this.hide())}launchSuccess(t){this.renderConnected(),clearInterval(this.connectAnimInterval),this.core.mediaControl.resetKeepVisible(),s.Log.debug(this.name,"launch success - session: "+t.sessionId),this.newSession(t)}launchError(t){s.Log.debug(this.name,"error on launch",t),this.renderDisconnected(),clearInterval(this.connectAnimInterval),this.core.mediaControl.resetKeepVisible(),this.container.play()}loadMediaSuccess(t,e){s.Log.debug(this.name,"new media session",e,"(",t,")"),this.originalPlayback=this.playback;let i=l()({},this.originalPlayback.options,{currentMedia:e,mediaControl:this.core.mediaControl,poster:this.options.poster||this.core.options.poster,settings:this.originalPlayback.settings,ccTracks:this.textTracks,updateCCTrackID:t=>this.updateCCTrackID(t)});this.src=this.originalPlayback.src,this.playbackProxy=new n(i),this.playbackProxy.render(),this.core.$el.addClass("chromecast-active"),this.mediaSession=e,this.originalPlayback.$el.remove();let a=this.container;a.$el.append(this.playbackProxy.$el),a.stopListening(),a.playback=this.playbackProxy,a.bindEvents(),a.settingsUpdate()}loadMediaError(t){s.Log.warn(this.name,"media error",t)}newSession(t){this.session=t,this.deviceState=T,this.renderConnected(),t.addUpdateListener(()=>this.sessionUpdateListener()),t.addMessageListener(`urn:x-cast:${this.messageNamespace}:text-tracks`,(t,e)=>this.onSessionTextTracks(JSON.parse(e))),this.containerPlay()}sessionStopped(){this.renderDisconnected();let t=this.currentTime,e=void 0;this.mediaSession&&(e=this.mediaSession.playerState,this.mediaSession=null),this.core.$el.removeClass("chromecast-active"),this.core.load(this.src||this.core.options.sources);let i=this.container;this.playbackProxy&&((this.playbackProxy.isPlaying()||"PAUSED"===e)&&i.once(s.Events.CONTAINER_READY,()=>{i.play(),i.playback.seek(100*t/i.getDuration())}),this.playbackProxy.stop())}loadMedia(){this.container.pause();let t=this.container.options.src;s.Log.debug(this.name,"loading... "+t);let e=this.createMediaInfo(t),i=new chrome.cast.media.LoadRequest(e);i.autoplay=!0,this.currentTime&&(i.currentTime=this.currentTime),this.session.loadMedia(i,t=>this.loadMediaSuccess("loadMedia",t),t=>this.loadMediaError(t))}createMediaInfo(t){let e=M.mimeTypeFor(t),i=new chrome.cast.media.MediaInfo(t);i.contentType=this.options.contentType||e,i.customData=this.options.customData;let s=this.createMediaMetadata();return i.metadata=s,i}createMediaMetadata(){this.options.media||(this.options.media={});let t=this.options.media.type,e=this.createCastMediaMetadata(t);return e.title=this.options.media.title,e.subtitle=this.options.media.subtitle,e.releaseDate=this.options.media.releaseDate,t===M.TvShow?(e.episode=this.options.media.episode,e.originalAirdate=this.options.media.originalAirdate,e.season=this.options.media.season,e.seriesTitle=this.options.media.seriesTitle):t===M.Movie&&(e.studio=this.options.media.studio),this.options.media.images&&(e.images=this.options.media.images.map(t=>new chrome.cast.Image(t))),!e.images&&this.options.poster&&(e.images=[new chrome.cast.Image(this.options.poster)]),!e.images&&this.core.options.poster&&(e.images=[new chrome.cast.Image(this.core.options.poster)]),e}createCastMediaMetadata(t){switch(t){case M.Movie:return new chrome.cast.media.MovieMediaMetadata;case M.TvShow:return new chrome.cast.media.TvShowMediaMetadata;default:return new chrome.cast.media.GenericMediaMetadata}}show(){this.$el.show()}hide(){this.$el.hide()}click(){if(this.currentTime=this.container.getCurrentTime(),this.container.pause(),chrome.cast.requestSession(t=>this.launchSuccess(t),t=>this.launchError(t)),!this.session){let t=0,e=[g.a,v.a,b.a];clearInterval(this.connectAnimInterval),this.connectAnimInterval=setInterval(()=>{this.$el.html(e[t]),t=(t+1)%3},600),this.core.mediaControl.setKeepVisible()}}containerChanged(){this.stopListening(),this.bindEvents()}containerTimeUpdate(t){this.currentTime=t.current}containerPlay(){!this.session||this.mediaSession&&"IDLE"!==this.mediaSession.playerState&&"PAUSED"!==this.mediaSession.playerState||(s.Log.debug(this.name,"load media"),this.loadMedia())}renderConnected(){this.$el.html(C.a)}renderDisconnected(){this.$el.html(p.a)}render(){return this.session?this.renderConnected():this.renderDisconnected(),this.core.mediaControl.$el.find(".media-control-right-panel").append(this.el),this.$style&&this.$style.remove(),this.$style=s.Styler.getStyleFor(c.a,{baseUrl:this.core.options.baseUrl}),this.core.$el.append(this.$style),this}static mimeTypeFor(t){let e=(t.split("?")[0].match(/.*\.(.*)$/)||[])[1];return w[e]?w[e]:t.indexOf(".ism")>-1?"application/vnd.ms-sstr+xml":void 0}}}]).default}));
//# sourceMappingURL=clappr-chromecast-plugin.min.js.map