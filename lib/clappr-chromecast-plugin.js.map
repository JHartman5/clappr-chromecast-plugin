{"version":3,"sources":["webpack://ChromecastPlugin/webpack/universalModuleDefinition","webpack://ChromecastPlugin/webpack/bootstrap","webpack://ChromecastPlugin/external {\"amd\":\"@clappr/player\",\"commonjs\":\"@clappr/player\",\"commonjs2\":\"@clappr/player\",\"root\":\"Clappr\"}","webpack://ChromecastPlugin/./src/public/chromecast.html","webpack://ChromecastPlugin/./src/public/style.scss","webpack://ChromecastPlugin//Users/mdg/Source/boxcast_js/node_modules/lodash.assign/index.js","webpack://ChromecastPlugin/./src/public/ic_cast_24dp.svg","webpack://ChromecastPlugin/./src/public/ic_cast0_24dp.svg","webpack://ChromecastPlugin/./src/public/ic_cast1_24dp.svg","webpack://ChromecastPlugin/./src/public/ic_cast2_24dp.svg","webpack://ChromecastPlugin/./src/public/ic_cast_connected_24dp.svg","webpack://ChromecastPlugin/./node_modules/css-loader/dist/runtime/api.js","webpack://ChromecastPlugin/./src/chromecast_playback.js","webpack://ChromecastPlugin/./src/chromecast.js"],"names":["TICK_INTERVAL","ChromecastPlayback","Playback","name","template","chromecastHTML","attributes","class","isReady","constructor","options","src","currentMedia","mediaControl","addUpdateListener","onMediaStatusUpdate","settings","noVolume","default","filter","left","right","_closedCaptionsTracks","ccTracks","_ccTrackId","_updateCCTrackID","updateCCTrackID","closedCaptionsTracks","closedCaptionsTrackId","trackID","render","$el","html","poster","$","css","play","pause","stopTimer","getPlaybackType","LIVE","trigger","Events","PLAYBACK_DVR","stop","seek","time","request","chrome","cast","media","SeekRequest","currentTime","startTimer","Log","warn","getDuration","seekPercentage","percentage","duration","timer","setInterval","updateMediaControl","clearInterval","isPlaying","playerState","liveSeekableRange","VOD","changeTogglePlay","isBuffering","PLAYBACK_BUFFERING","PLAYBACK_BUFFERFULL","prevState","PLAYBACK_PLAY","PLAYBACK_ENDED","PLAYBACK_PAUSE","position","getEstimatedTime","PLAYBACK_TIMEUPDATE","current","total","show","hide","DEVICE_STATE","DEFAULT_CLAPPR_APP_ID","DEFAULT_MESSAGE_NAMESPACE","MIMETYPES","ChromecastPlugin","UICorePlugin","supportedVersion","min","max","Movie","TvShow","Generic","version","VERSION","tagName","events","core","chromecast","container","getCurrentContainer","activeContainer","playback","getCurrentPlayback","activePlayback","bootTryDelay","bootMaxTryCount","bootTryCount","textTracks","messageNamespace","customNamespace","isBootable","appId","deviceState","IDLE","embedScript","disable","bindEvents","listenTo","MEDIACONTROL_RENDERED","CORE_ACTIVE_CONTAINER_CHANGED","containerChanged","MEDIACONTROL_CONTAINERCHANGED","CONTAINER_TIMEUPDATE","containerTimeUpdate","CONTAINER_PLAY","containerPlay","CONTAINER_ENDED","sessionStopped","Browser","isChrome","isSecure","isLocalhost","window","location","hostname","protocol","enable","isAvailable","script","document","createElement","setAttribute","onload","bootstrapCastApi","body","appendChild","initializeCastApi","loaded","errorInfo","setTimeout","t","id","length","console","enabledTextTrackIDs","session","sendMessage","CONTAINER_SUBTITLE_CHANGED","autoJoinPolicy","AutoJoinPolicy","ORIGIN_SCOPED","sessionRequest","SessionRequest","apiConfig","ApiConfig","sessionListener","e","receiverListener","initialize","debug","sessionId","newSession","sessionUpdateListener","status","SessionStatus","STOPPED","onSessionTextTracks","tracks","map","trackId","track","playbackProxy","PLAYBACK_SUBTITLE_AVAILABLE","ReceiverAvailability","AVAILABLE","launchSuccess","renderConnected","connectAnimInterval","resetKeepVisible","launchError","renderDisconnected","loadMediaSuccess","how","mediaSession","originalPlayback","assign","addClass","remove","append","stopListening","settingsUpdate","loadMediaError","ACTIVE","addMessageListener","_","tracksJSON","JSON","parse","undefined","removeClass","load","sources","once","CONTAINER_READY","loadMedia","mediaInfo","createMediaInfo","LoadRequest","autoplay","mimeType","mimeTypeFor","MediaInfo","contentType","customData","metadata","createMediaMetadata","type","createCastMediaMetadata","title","subtitle","releaseDate","episode","originalAirdate","season","seriesTitle","studio","images","url","Image","MovieMediaMetadata","TvShowMediaMetadata","GenericMediaMetadata","click","getCurrentTime","requestSession","connectingIcons","connecting1IconSvg","connecting2IconSvg","connecting3IconSvg","setKeepVisible","timeProgress","connectedIconSvg","castIconSvg","find","$style","Styler","getStyleFor","chromecastStyle","baseUrl","srcUrl","extension","split","match","indexOf"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,gD;;;;;;ACAA,6H;;;;;;ACAA;AACA,kCAAkC,mBAAO,CAAC,CAAmD;AAC7F;AACA;AACA,cAAc,QAAS,wBAAwB,YAAY,WAAW,uGAAuG,kBAAkB,YAAY,WAAW,qDAAqD,wBAAwB,kDAAkD,sBAAsB,YAAY,mBAAmB,uBAAuB,SAAS,WAAW,YAAY,eAAe,iBAAiB,iBAAiB,aAAa,WAAW,YAAY,sBAAsB,gBAAgB,eAAe,mCAAmC,yBAAyB,yBAAyB,aAAa,0CAA0C,yBAAyB,aAAa,uBAAuB,WAAW,YAAY,0FAA0F,UAAU,YAAY,mBAAmB;AAC96B;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,MAAM;AACjB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iDAAiD,eAAe;;AAEhE;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,OAAO,WAAW;AAC7B,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA,wBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA,6BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5nBA,we;;;;;;ACAA,mpB;;;;;;ACAA,mpB;;;;;;ACAA,slB;;;;;;ACAA,siB;;;;;;;ACAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;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","file":"clappr-chromecast-plugin.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@clappr/player\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@clappr/player\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ChromecastPlugin\"] = factory(require(\"@clappr/player\"));\n\telse\n\t\troot[\"ChromecastPlugin\"] = factory(root[\"Clappr\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = \"<div class=\\\"chromecast-playback-background\\\"></div>\\n<div class=\\\"chromecast-playback-overlay\\\"></div>\\n\";","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".chromecast-playback{height:100%;width:100%}.chromecast-playback .chromecast-playback-background,.chromecast-playback .chromecast-playback-overlay{position:absolute;height:100%;width:100%}.chromecast-playback .chromecast-playback-background{background-size:contain}.chromecast-playback .chromecast-playback-overlay{background-color:#000;opacity:0.4}.chromecast-button{background:transparent;border:0;width:32px;height:32px;font-size:22px;line-height:32px;letter-spacing:0;margin:0 6px;color:#fff;opacity:0.5;vertical-align:middle;text-align:left;cursor:pointer;-webkit-font-smoothing:antialiased;transition:all 0.1s ease}.chromecast-button:hover{opacity:0.75;text-shadow:rgba(255,255,255,0.8) 0 0 5px}.chromecast-button:focus{outline:none}.chromecast-button svg{width:24px;height:24px}.chromecast-button svg #cast,.chromecast-button svg #cast-on,.chromecast-button svg #Path{fill:#fff;stroke:#fff;stroke-width:0.5px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = assign;\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><g id=\\\"Page-1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><g id=\\\"ic_cast_black_24dp\\\"><g id=\\\"ic_remove_circle_white_24dp\\\"><path d=\\\"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\\\" id=\\\"cast\\\" fill=\\\"#000\\\"></path><path id=\\\"bounds\\\" d=\\\"M0 0h24v24H0z\\\"></path></g></g></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><g id=\\\"Page-1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><g id=\\\"ic_cast0_black_24dp\\\"><g id=\\\"ic_remove_circle_white_24dp\\\"><path d=\\\"M1 18v3h3c0-1.66-1.34-3-3-3z\\\" id=\\\"Path\\\" fill=\\\"#000\\\"></path><path d=\\\"M1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z\\\" id=\\\"Path\\\" opacity=\\\".3\\\" fill=\\\"#000\\\"></path><path d=\\\"M1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z\\\" id=\\\"Path\\\" opacity=\\\".3\\\" fill=\\\"#000\\\"></path><path d=\\\"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\\\" id=\\\"Path\\\" fill=\\\"#000\\\"></path><path id=\\\"bounds\\\" d=\\\"M0 0h24v24H0z\\\"></path></g></g></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><g id=\\\"Page-1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><g id=\\\"ic_cast1_black_24dp\\\"><g id=\\\"ic_remove_circle_white_24dp\\\"><path d=\\\"M1 18v3h3c0-1.66-1.34-3-3-3z\\\" id=\\\"Path\\\" opacity=\\\".3\\\" fill=\\\"#000\\\"></path><path d=\\\"M1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z\\\" id=\\\"Path\\\" fill=\\\"#000\\\"></path><path d=\\\"M1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z\\\" id=\\\"Path\\\" opacity=\\\".3\\\" fill=\\\"#000\\\"></path><path d=\\\"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\\\" id=\\\"cast\\\" fill=\\\"#000\\\"></path><path id=\\\"bounds\\\" d=\\\"M0 0h24v24H0z\\\"></path></g></g></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><g id=\\\"Page-1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><g id=\\\"ic_cast2_black_24dp\\\"><g id=\\\"ic_remove_circle_white_24dp\\\"><path d=\\\"M1 18v3h3c0-1.66-1.34-3-3-3zM1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z\\\" id=\\\"Path\\\" opacity=\\\".3\\\" fill=\\\"#000\\\"></path><path d=\\\"M1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z\\\" id=\\\"Path\\\" fill=\\\"#000\\\"></path><path d=\\\"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\\\" id=\\\"cast\\\" fill=\\\"#000\\\"></path><path id=\\\"bounds\\\" d=\\\"M0 0h24v24H0z\\\"></path></g></g></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><g id=\\\"Page-1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><g id=\\\"ic_cast_connected_black_24dp\\\"><g id=\\\"ic_remove_circle_white_24dp\\\"><path d=\\\"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\\\" id=\\\"cast-on\\\" fill=\\\"#000\\\"></path><path id=\\\"bounds\\\" d=\\\"M0 0h24v24H0z\\\"></path></g></g></g></svg>\"","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","import {Events, Log, Playback, template} from '@clappr/player'\nimport chromecastHTML from './public/chromecast.html'\n\nconst TICK_INTERVAL = 100\n\nexport default class ChromecastPlayback extends Playback {\n\n  get name() { return 'chromecast_playback' }\n  get template() { return template(chromecastHTML) }\n  get attributes() { return { class: 'chromecast-playback' } }\n\n  get isReady() { return true }\n\n  constructor(options) {\n    super(options)\n    this.src = options.src\n    this.currentMedia = options.currentMedia\n    this.mediaControl = options.mediaControl\n    this.currentMedia.addUpdateListener(() => this.onMediaStatusUpdate())\n    this.settings = options.settings\n    let noVolume = (name) => name != 'volume'\n    this.settings.default && (this.settings.default = this.settings.default.filter(noVolume))\n    this.settings.left && (this.settings.left = this.settings.left.filter(noVolume))\n    this.settings.right && (this.settings.right = this.settings.right.filter(noVolume))\n    this._closedCaptionsTracks = options.ccTracks || []\n    this._ccTrackId = -1\n    this._updateCCTrackID = options.updateCCTrackID\n  }\n\n  get closedCaptionsTracks() {\n    return this._closedCaptionsTracks\n  }\n\n  get closedCaptionsTrackId() {\n    return this._ccTrackId\n  }\n\n  set closedCaptionsTrackId(trackID) {\n    this._ccTrackId = trackID\n    this._updateCCTrackID(trackID)\n  }\n\n  render() {\n    let template = this.template()\n    this.$el.html(template)\n    if (this.options.poster) {\n      this.$('.chromecast-playback-background').css('background-image', 'url(' + this.options.poster + ')')\n    } else {\n      this.$('.chromecast-playback-background').css('background-color', '#666')\n    }\n  }\n\n  play() {\n    this.currentMedia.play()\n  }\n\n  pause() {\n    this.stopTimer()\n    this.currentMedia.pause()\n    if (this.getPlaybackType() === Playback.LIVE) {\n      this.trigger(Events.PLAYBACK_DVR, true)\n    }\n  }\n\n  stop() {\n    this.stopTimer()\n    this.currentMedia.pause() // FIXME: properly handle media stop\n  }\n\n  seek(time) {\n    this.stopTimer()\n    let request = new chrome.cast.media.SeekRequest()\n    request.currentTime = time\n    this.currentMedia.seek(request,\n      () => this.startTimer(), () => Log.warn('seek failed'))\n    if (this.getPlaybackType() === Playback.LIVE) {\n      // assume live if time within 30 seconds of end of live stream\n      this.trigger(Events.PLAYBACK_DVR, time < this.getDuration() - 30)\n    }\n  }\n\n  seekPercentage(percentage) {\n    if (percentage >= 0 && percentage <= 100) {\n      let duration = this.getDuration()\n      this.seek(percentage * duration / 100)\n    }\n  }\n\n  startTimer() {\n    this.timer = setInterval(() => this.updateMediaControl(), TICK_INTERVAL)\n  }\n\n  stopTimer() {\n    clearInterval(this.timer)\n    this.timer = null\n  }\n\n  getDuration() {\n    return this.currentMedia.media.duration\n  }\n\n  isPlaying() {\n    return this.currentMedia.playerState === 'PLAYING' || this.currentMedia.playerState === 'BUFFERING'\n  }\n\n  getPlaybackType() {\n    return this.currentMedia.liveSeekableRange ? Playback.LIVE : Playback.VOD\n  }\n\n  onMediaStatusUpdate() {\n    this.mediaControl.changeTogglePlay()\n    if (this.isPlaying() && !this.timer) {\n      this.startTimer()\n    }\n\n    if (this.currentMedia.playerState === 'BUFFERING') {\n      this.isBuffering = true\n      this.trigger(Events.PLAYBACK_BUFFERING, this.name)\n    } else if (this.currentMedia.playerState === 'PLAYING') {\n      if (this.isBuffering) {\n        this.isBuffering = false\n        this.trigger(Events.PLAYBACK_BUFFERFULL, this.name)\n      }\n      if (this.prevState !== this.currentMedia.playerState) {\n        this.trigger(Events.PLAYBACK_PLAY, this.name)\n      }\n    } else if (this.currentMedia.playerState === 'IDLE') {\n      if (this.isBuffering) {\n        this.isBuffering = false\n        this.trigger(Events.PLAYBACK_BUFFERFULL, this.name)\n      }\n      this.trigger(Events.PLAYBACK_ENDED, this.name)\n    } else if (this.currentMedia.playerState === 'PAUSED') {\n      if (this.prevState !== this.currentMedia.playerState) {\n        this.trigger(Events.PLAYBACK_PAUSE, this.name)\n      }\n    }\n\n    this.prevState = this.currentMedia.playerState\n  }\n\n  updateMediaControl() {\n    let position = this.currentMedia.getEstimatedTime()\n    let duration = this.currentMedia.media.duration\n    this.trigger(Events.PLAYBACK_TIMEUPDATE, {current: position, total: duration}, this.name)\n  }\n\n  show() {\n    this.$el.show()\n  }\n\n  hide() {\n    this.$el.hide()\n  }\n}\n","import {Browser, Events, Log, Styler, UICorePlugin} from '@clappr/player'\nimport ChromecastPlayback from './chromecast_playback'\nimport chromecastStyle from './public/style.scss'\nimport assign from 'lodash.assign'\nimport castIconSvg from './public/ic_cast_24dp.svg'\nimport connecting1IconSvg from './public/ic_cast0_24dp.svg'\nimport connecting2IconSvg from './public/ic_cast1_24dp.svg'\nimport connecting3IconSvg from './public/ic_cast2_24dp.svg'\nimport connectedIconSvg from './public/ic_cast_connected_24dp.svg'\n\nconst DEVICE_STATE = {\n  'IDLE' : 0,\n  'ACTIVE' : 1,\n  'WARNING' : 2,\n  'ERROR' : 3\n}\n\nconst DEFAULT_CLAPPR_APP_ID = '9DFB77C0'\n\nconst DEFAULT_MESSAGE_NAMESPACE = 'clappr-chromecast-plugin'\n\nconst MIMETYPES = {\n  'mp4': 'video/mp4',\n  'ogg': 'video/ogg',\n  '3gpp': 'video/3gpp',\n  'webm': 'video/webm',\n  'mkv': 'video/x-matroska',\n  'm3u8': 'application/x-mpegurl',\n  'mpd': 'application/dash+xml'\n}\nMIMETYPES['ogv'] = MIMETYPES['ogg']\nMIMETYPES['3gp'] = MIMETYPES['3gpp']\n\nexport default class ChromecastPlugin extends UICorePlugin {\n  get supportedVersion() {\n    return { min: '0.4.0', max: '0.5.0' }\n  }\n\n  static get Movie() { return 'movie' }\n  static get TvShow() { return 'tv_show' }\n  static get Generic() { return 'none' }\n\n  static get version() { return VERSION }\n  get version() { return VERSION }\n\n  get name() { return 'chromecast' }\n  get tagName() { return 'button' }\n  get attributes() {\n    return {\n      'class' : 'chromecast-button',\n      'type'  : 'button'\n    }\n  }\n  get events() {\n    return {\n      'click': 'click'\n    }\n  }\n  get options() { return this.core.options.chromecast || (this.core.options.chromecast = {}) }\n  get container() {\n    return this.core.getCurrentContainer\n      ? this.core.getCurrentContainer()\n      : this.core.activeContainer // Clappr 0.3.0 or greater\n  }\n  get playback() {\n    return this.core.getCurrentPlayback\n      ? this.core.getCurrentPlayback()\n      : this.core.activePlayback // Clappr 0.3.0 or greater\n  }\n\n  constructor(core) {\n    super(core)\n\n    this.bootTryDelay = this.options.bootTryDelay || 500      // Default is 500 milliseconds between each attempt\n    this.bootMaxTryCount = this.options.bootMaxTryCount || 6  // Default is 6 attempts (3 seconds)\n    this.bootTryCount = 0\n    this.textTracks = []\n    this.messageNamespace = this.options.customNamespace || DEFAULT_MESSAGE_NAMESPACE\n\n    if (this.isBootable()) {\n      this.appId = this.options.appId || DEFAULT_CLAPPR_APP_ID\n      this.deviceState = DEVICE_STATE.IDLE\n      this.embedScript()\n    } else {\n      this.disable()\n    }\n  }\n\n  bindEvents() {\n    this.listenTo(this.core.mediaControl, Events.MEDIACONTROL_RENDERED, this.render)\n\n    if (Events.CORE_ACTIVE_CONTAINER_CHANGED) {\n      // Clappr 0.3.0 or greater\n      this.listenTo(this.core, Events.CORE_ACTIVE_CONTAINER_CHANGED, this.containerChanged)\n    } else {\n      this.listenTo(this.core.mediaControl, Events.MEDIACONTROL_CONTAINERCHANGED, this.containerChanged)\n    }\n\n    if (this.container) {\n      this.listenTo(this.container, Events.CONTAINER_TIMEUPDATE, this.containerTimeUpdate)\n      this.listenTo(this.container, Events.CONTAINER_PLAY, this.containerPlay)\n      this.listenTo(this.container, Events.CONTAINER_ENDED, this.sessionStopped)\n    }\n  }\n\n  isBootable() {\n    // Browser must be Chrome\n    if (!Browser.isChrome) {\n      return false\n    }\n\n    // Chrome lesser than or equals to 71\n    // does not require secure page\n    if (Browser.version <= 71) {\n      return true\n    }\n\n    // Chrome greater than or equals to 72\n    // require secure page or localhost\n    return this.isSecure() || this.isLocalhost()\n  }\n\n  isLocalhost() {\n    return window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'\n  }\n\n  isSecure() {\n    return window.location.protocol === 'https:'\n  }\n\n  enable() {\n    super.enable()\n    this.render()\n    this.embedScript()\n  }\n\n  embedScript() {\n    if (!window.chrome || !window.chrome.cast || !window.chrome.cast.isAvailable) {\n      let script = document.createElement('script')\n      script.setAttribute('type', 'text/javascript')\n      script.setAttribute('async', 'async')\n      script.setAttribute('src', 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js')\n      script.onload = () => this.bootstrapCastApi()\n      document.body.appendChild(script)\n    } else {\n      this.bootstrapCastApi()\n    }\n  }\n\n  bootstrapCastApi() {\n    this.bootTryCount++\n\n    if (this.bootTryCount > this.bootMaxTryCount) {\n      this.bootTryCount = 0\n      Log.warn('GCastApi bootstrap timeout')\n      this.disable()\n      return\n    }\n\n    // The \"chrome\" property may not be available immediately on some iOS devices\n    if (window.chrome) {\n      this.bootTryCount = 0\n\n      if (window.chrome.cast && window.chrome.cast.isAvailable) {\n        this.appId = this.appId || DEFAULT_CLAPPR_APP_ID\n        this.initializeCastApi()\n      } else {\n        window['__onGCastApiAvailable'] = (loaded, errorInfo) => {\n          if (loaded) {\n            this.appId = this.appId || DEFAULT_CLAPPR_APP_ID\n            this.initializeCastApi()\n          } else {\n            Log.warn('GCastApi error', errorInfo)\n            this.disable()\n          }\n        }\n      }\n    } else {\n      setTimeout(() => { this.bootstrapCastApi() }, this.bootTryDelay)\n    }\n  }\n\n  updateCCTrackID(trackID) {\n    if (trackID !== -1) {\n      if (this.textTracks.filter(t => t.id === trackID).length === 0) {\n        console.warn(`Failed to enable text track with ID ${trackID}, as it does not exist.`)\n        return\n      }\n    }\n    var enabledTextTrackIDs = []\n    if (trackID !== -1) {\n      enabledTextTrackIDs = [trackID]\n    }\n    if (this.session) {\n      this.session.sendMessage(\n        `urn:x-cast:${this.messageNamespace}:active-text-tracks`,\n        enabledTextTrackIDs\n      )\n    }\n    let container = this.core.getCurrentContainer()\n    if (container) {\n      container.trigger(Events.CONTAINER_SUBTITLE_CHANGED, {id: trackID})\n    }\n  }\n\n  initializeCastApi() {\n    let autoJoinPolicy = chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED\n    let sessionRequest = new chrome.cast.SessionRequest(this.appId)\n    let apiConfig = new chrome.cast.ApiConfig(sessionRequest,\n      (session) => this.sessionListener(session), (e) => this.receiverListener(e), autoJoinPolicy)\n    chrome.cast.initialize(apiConfig, () => Log.debug(this.name, 'init success'), () => Log.warn(this.name, 'init error'))\n  }\n\n  sessionListener(session) {\n    Log.debug(this.name, 'new session id:' + session.sessionId)\n    this.newSession(session)\n  }\n\n  sessionUpdateListener() {\n    if (this.session) {\n      Log.debug(this.name, this.session.status)\n      if (this.session.status === chrome.cast.SessionStatus.STOPPED) {\n        this.sessionStopped()\n        this.session = null\n      }\n    }\n  }\n\n  onSessionTextTracks(tracks) {\n    this.textTracks = tracks.map(t => {return {id: t.trackId, name: t.name, track: t}})\n    if (this.textTracks.length > 0) {\n      if (this.playbackProxy) {\n        this.playbackProxy._closedCaptionsTracks = this.textTracks\n      }\n      this.trigger(Events.PLAYBACK_SUBTITLE_AVAILABLE)\n      this.updateCCTrackID(this.core.getCurrentContainer().closedCaptionsTrackId)\n    }\n  }\n\n  receiverListener(e) {\n    if ( e === chrome.cast.ReceiverAvailability.AVAILABLE ) {\n      Log.debug(this.name, 'receiver found')\n      this.show()\n    } else {\n      Log.debug(this.name, 'receiver list empty')\n      this.hide()\n    }\n  }\n\n  launchSuccess(session) {\n    this.renderConnected()\n    clearInterval(this.connectAnimInterval)\n    this.core.mediaControl.resetKeepVisible()\n    Log.debug(this.name, 'launch success - session: ' + session.sessionId)\n    this.newSession(session)\n  }\n\n  launchError(e) {\n    Log.debug(this.name, 'error on launch', e)\n    this.renderDisconnected()\n    clearInterval(this.connectAnimInterval)\n    this.core.mediaControl.resetKeepVisible()\n    this.container.play()\n  }\n\n  loadMediaSuccess(how, mediaSession) {\n    Log.debug(this.name, 'new media session', mediaSession, '(', how , ')')\n\n    this.originalPlayback = this.playback\n\n    let options = assign({}, this.originalPlayback.options, {\n      currentMedia: mediaSession,\n      mediaControl: this.core.mediaControl,\n      poster: this.options.poster || this.core.options.poster,\n      settings: this.originalPlayback.settings,\n      ccTracks: this.textTracks,\n      updateCCTrackID: (id) => this.updateCCTrackID(id)\n    })\n    this.src = this.originalPlayback.src\n    this.playbackProxy = new ChromecastPlayback(options)\n    this.playbackProxy.render()\n    this.core.$el.addClass('chromecast-active')\n\n    this.mediaSession = mediaSession\n\n    this.originalPlayback.$el.remove()\n\n    let container = this.container\n    container.$el.append(this.playbackProxy.$el)\n    container.stopListening()\n    container.playback = this.playbackProxy\n    container.bindEvents()\n    container.settingsUpdate()\n  }\n\n  loadMediaError(e) {\n    Log.warn(this.name, 'media error', e)\n  }\n\n  newSession(session) {\n    this.session = session\n    this.deviceState = DEVICE_STATE.ACTIVE\n    this.renderConnected()\n\n    session.addUpdateListener(() => this.sessionUpdateListener())\n    session.addMessageListener(\n      `urn:x-cast:${this.messageNamespace}:text-tracks`,\n      (_, tracksJSON) => this.onSessionTextTracks(JSON.parse(tracksJSON))\n    )\n\n    this.containerPlay()\n  }\n\n  sessionStopped() {\n    this.renderDisconnected()\n\n    let time = this.currentTime\n\n    let playerState = undefined\n    if (this.mediaSession) {\n      playerState = this.mediaSession.playerState\n      this.mediaSession = null\n    }\n\n    this.core.$el.removeClass('chromecast-active')\n    this.core.load(this.src || this.core.options.sources)\n\n    let container = this.container\n\n    if (this.playbackProxy) {\n      if (this.playbackProxy.isPlaying() || playerState === 'PAUSED') {\n        container.once(Events.CONTAINER_READY, () => {\n          container.play()\n          container.playback.seek(100 * time / container.getDuration())\n        })\n      }\n      this.playbackProxy.stop()\n    }\n  }\n\n  loadMedia() {\n    this.container.pause()\n    let src = this.container.options.src\n    Log.debug(this.name, 'loading... ' + src)\n    let mediaInfo = this.createMediaInfo(src)\n    let request = new chrome.cast.media.LoadRequest(mediaInfo)\n    request.autoplay = true\n    if (this.currentTime) {\n      request.currentTime = this.currentTime\n    }\n    this.session.loadMedia(request, (mediaSession) => this.loadMediaSuccess('loadMedia', mediaSession), (e) => this.loadMediaError(e))\n  }\n\n  createMediaInfo(src) {\n    let mimeType = ChromecastPlugin.mimeTypeFor(src)\n    let mediaInfo = new chrome.cast.media.MediaInfo(src)\n    mediaInfo.contentType = this.options.contentType || mimeType\n    mediaInfo.customData = this.options.customData\n    let metadata = this.createMediaMetadata()\n    mediaInfo.metadata = metadata\n    return mediaInfo\n  }\n\n  createMediaMetadata() {\n    this.options.media || (this.options.media = {})\n    let type = this.options.media.type\n\n    let metadata = this.createCastMediaMetadata(type)\n    metadata.title = this.options.media.title\n    metadata.subtitle = this.options.media.subtitle\n    metadata.releaseDate = this.options.media.releaseDate\n\n    if (type === ChromecastPlugin.TvShow) {\n      metadata.episode = this.options.media.episode\n      metadata.originalAirdate = this.options.media.originalAirdate\n      metadata.season = this.options.media.season\n      metadata.seriesTitle = this.options.media.seriesTitle\n    } else if (type === ChromecastPlugin.Movie) {\n      metadata.studio = this.options.media.studio\n    }\n\n    if (this.options.media.images) {\n      metadata.images = this.options.media.images.map((url) => new chrome.cast.Image(url))\n    }\n    if (!metadata.images && this.options.poster) {\n      metadata.images = [new chrome.cast.Image(this.options.poster)]\n    }\n    if (!metadata.images && this.core.options.poster) {\n      metadata.images = [new chrome.cast.Image(this.core.options.poster)]\n    }\n    return metadata\n  }\n\n  createCastMediaMetadata(type) {\n    switch (type) {\n    case ChromecastPlugin.Movie: return new chrome.cast.media.MovieMediaMetadata()\n    case ChromecastPlugin.TvShow: return new chrome.cast.media.TvShowMediaMetadata()\n    default: return new chrome.cast.media.GenericMediaMetadata()\n    }\n  }\n\n  show() {\n    this.$el.show()\n  }\n\n  hide() {\n    this.$el.hide()\n  }\n\n  click() {\n    this.currentTime = this.container.getCurrentTime()\n    this.container.pause()\n    chrome.cast.requestSession((session) => this.launchSuccess(session), (e) => this.launchError(e))\n    if (!this.session) {\n      let position = 0\n      let connectingIcons = [connecting1IconSvg, connecting2IconSvg, connecting3IconSvg]\n      clearInterval(this.connectAnimInterval)\n      this.connectAnimInterval = setInterval(() => {\n        this.$el.html(connectingIcons[position])\n        position = (position + 1) % 3\n      }, 600)\n      this.core.mediaControl.setKeepVisible()\n    }\n  }\n\n  containerChanged() {\n    this.stopListening()\n    this.bindEvents()\n  }\n\n  containerTimeUpdate(timeProgress) {\n    this.currentTime = timeProgress.current\n  }\n\n  containerPlay() {\n    if (this.session && (!this.mediaSession || this.mediaSession.playerState === 'IDLE' || this.mediaSession.playerState === 'PAUSED')) {\n      Log.debug(this.name, 'load media')\n      this.loadMedia()\n    }\n  }\n\n  renderConnected() {\n    this.$el.html(connectedIconSvg)\n  }\n\n  renderDisconnected() {\n    this.$el.html(castIconSvg)\n  }\n\n  render() {\n    this.session ? this.renderConnected() : this.renderDisconnected()\n    this.core.mediaControl.$el.find('.media-control-right-panel[data-media-control]').append(this.$el)\n    this.$style && this.$style.remove()\n    this.$style = Styler.getStyleFor(chromecastStyle, {baseUrl: this.core.options.baseUrl})\n    this.core.$el.append(this.$style)\n    return this\n  }\n\n  static mimeTypeFor(srcUrl) {\n    let extension = (srcUrl.split('?')[0].match(/.*\\.(.*)$/) || [])[1]\n    if (MIMETYPES[extension]) {\n      return MIMETYPES[extension]\n    } else if (srcUrl.indexOf('.ism') > -1) {\n      return 'application/vnd.ms-sstr+xml'\n    }\n  }\n}\n"],"sourceRoot":""}